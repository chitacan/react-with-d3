class: center, middle

<div id="triangles-intro"></div>

# ë¦¬ì•¡íŠ¸ì™€ ë””3
.degrade[ë””ì•„ë¸”ë¡œ3 ì•„ë‹˜ ğŸ˜…]
.footnote.pull-right[ğŸ´  on [github](https://github.com/chitacan/react-with-d3)]

---
.left-column[
  ## # About Me
]

.right-column[
* Software Engineer @Riiid
* [https://github.com/chitacan](https://github.com/chitacan)
* Developing back office & Dashboard
* [D3.js](http://d3js.org/), [React](http://facebook.github.io/react/), [RxJs](https://github.com/Reactive-Extensions/RxJS/)
]

---
.left-column[
  ## # About Me
  ## # Subject
]

.right-column[
* `React` ì™€ `D3` ë¥¼ ì¡°í•©í•˜ê²Œëœ ë°°ê²½
* ì´ˆê°„ë‹¨ ì†Œê°œ & ê³µí†µì 
* `React` ì™€ `D3` ë¥¼ ì¡°í•©í•˜ëŠ” 2ê°€ì§€ ë°©ë²•
* Riiid ëŠ” ì–´ë–»ê²Œ ì“°ë‚˜ìš”?
]

---
.left-column[
  ## # ì‹œì‘
]

.right-column[
[`renote`](https://play.google.com/store/apps/details?id=co.riiid.renote) ì˜ ì‹œê°í™”

* ë‚´ê°€ ì œí’ˆì„ ì–´ë–»ê²Œ ì‚¬ìš©í•˜ê³  ìˆëŠ”ì§€ ì‹œê°ì ìœ¼ë¡œ í™•ì¸í•  ìˆ˜ ìˆë„ë¡
* 7ì¼ì•ˆì— `iOS`, `Android` ë™ì‹œì— ğŸ˜±
* `D3` ë¥¼ í™œìš©í•´ ì°¨íŠ¸ë¥¼ ë§Œë“¤ê³  `html` íŒŒì¼ê³¼ ë¬¶ì–´ `webview` ì—ì„œ ë¡œë“œ
* `D3`, `coffeescript`, `browserify`, `webview` ì‚¬ìš©

![:scale 40%](img/screenshot.png)
]

---
.left-column[
  ## # ì‹œì‘
  ## # ê³ ë¯¼
]

.right-column[
í•˜ì§€ë§Œ,

* ì°¨íŠ¸ì˜ ê°¯ìˆ˜ê°€ ëŠ˜ì–´ë‚˜ê³ , ì§€ì›í•˜ëŠ” í”Œë«í¼ì´ ëŠ˜ì–´ë‚˜ë„
* ë¹ ë¥´ê²Œ ì°¨íŠ¸ë¥¼ ì¶”ê°€í•˜ê³ , ê´€ë¦¬í•  ìˆ˜ ìˆì„ê¹Œ?

<br/>
<br/>
![:scale 90%](img/charts.png)
]

---
.left-column[
  ## # ë°œë‹¨
  ## # ê³ ë¯¼
]

.right-column[
`D3` ë§Œìœ¼ë¡œëŠ” ì–´ë µì§€ ì•Šì„ê¹Œ?

* `D3` ì˜ ê²°ê³¼ë¬¼ì€ CSS, DOM ì— ì˜ì¡´ì„±ì„ ê°€ì§€ê³  ìˆìŒ
* `D3` ì½”ë“œë¥¼ ì¬ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” ì¶”ê°€ì ì¸ ì‘ì—…ì´ í•„ìš”í•¨

]

---
.left-column[
  ## # ë°œë‹¨
  ## # ê³ ë¯¼
  ## # ê°œë°œ
]

.right-column[
[`renote`](https://play.google.com/store/apps/details?id=co.riiid.renote) ì˜ ì‹œê°í™” V2

* ì°¨íŠ¸ë¥¼ `React` ì»´í¬ë„ŒíŠ¸ë¡œ ë³€í™˜
* amazon s3 ì˜ static hosting ì„ í™œìš©í•´ ë°”ì´ë„ˆë¦¬ì— í¬í•¨ë˜ì§€ ì•Šì•„ë„ ë™ì‘í•  ìˆ˜ ìˆë„ë¡
* ì „ì²´ ì°¨íŠ¸ë¥¼ í™•ì¸í•  ìˆ˜ ìˆëŠ” ëŒ€ì‹œë³´ë“œ
* `D3`, `React`, `coffeescript`, `browserify`, `webview`, `amazon s3` ì‚¬ìš©

![:scale 40%](img/screenshot_v2.png)
]

---
class: center, middle

# ì˜¤í˜¸ğŸ’¡

.degrade[`D3` ë¡œ ë§Œë“  ì½”ë“œë¥¼ `React` ì»´í¬ë„ŒíŠ¸ë¡œ ë§Œë“¤ë©´,<br> ì—¬ëŸ¬ê³³ì—ì„œ í™œìš©í•˜ê¸° ì¢‹ì§€ ì•Šì„ê¹Œ?]

---
class: center, middle

# ë¦¬ì•¡íŠ¸ì™€ ë””3

.degrade[ì´ˆê°„ë‹¨ ì†Œê°œ & ê³µí†µì ]

---
.left-column[
  ## # D3?
]

.right-column[
`Data Driven Document` == `DDD` == `D3`

* ë°ì´í„° ì‹œê°í™”ì˜ í•„ìˆ˜ ë¼ì´ë¸ŒëŸ¬ë¦¬
* ë°ì´í„° fetching, ë³€í™˜, DOMê³¼ ì—°ê²°ì— í•„ìš”í•œ ê±°ì˜ ëª¨ë“  ë„êµ¬ ì œê³µ
* [http://bl.ocks.org/mbostock](http://bl.ocks.org/mbostock)
]

---
.left-column[
  ## # D3?
  ## # í¸ê²¬
]

.right-column[
`D3` ëŠ”

* ì°¨íŠ¸ ë§Œë“¤ë•Œë‚˜ ì“°ëŠ”ê±° ì•„ë‹˜? ğŸ’€
* svg ë§Œ ë‹¤ë£¨ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ ì•„ë‹˜? ğŸ’€

`D3` ëŠ”

* ë°ì´í„°ì™€ ì—°ê²°ëœ `DOM` ì„ ë§Œë“¤ê¸° ìœ„í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬
* `ë°ì´í„°` ì™€ `DOM` ì„ ì—°ê²°í•˜ëŠ” ë‹¤ì–‘í•œ ë„êµ¬(selection, scale, dynamic properties)ë¥¼ ì œê³µ
]

---
.left-column[
  ## # D3?
  ## # í¸ê²¬
  ## # Selection
]

.right-column[
`ë°ì´í„°` ì™€ `DOM` ì˜ ì—°ê²°ì„ ë„ì™€ì£¼ëŠ” `D3` ì˜ í•µì‹¬ ë„êµ¬

* `D3` ë¡œ ë†€ê¸° ìœ„í•´ì„œëŠ” ë°˜ë“œì‹œ ì´í•´í•´ì•¼ í•˜ëŠ” ë„êµ¬ì§€ë§Œ
* `D3` ë¥¼ ì‹œì‘í•˜ëŠ” ì‚¬ëŒë“¤ì—ê² ê°€ì¥ ì–´ë ¤ìš´ ë¶€ë¶„ ğŸ˜­
* enter, update, exit íŒ¨í„´

```javascript
selection = d3.selectAll('rect')
  .data([1,2,3,4,5,6]);

// enter
selection.enter().append('rect')
  .x((d, i) => i)
  .attr('height', d => d);

// update
selection.x((d, i) => i)
  .attr('height', d => d)

// exit
selection.exit().remove()
```
]

---
.left-column[
  ## # D3?
  ## # í¸ê²¬
  ## # Selection
]

.right-column[
<div id="selection-demo"></div>
]

.right-column[
* ì¶”ê°€ë˜ëŠ” ë°°ì—´ì˜ ì•„ì´í…œ ì„ íƒ ğŸ‘‰ enter
* ì‚­ì œë˜ëŠ” ë°°ì—´ì˜ ì•„ì´í…œ ì„ íƒ ğŸ‘‰ exit
* ë³€ê²½ëœ ë°°ì—´ì˜ ì•„ì´í…œ ì„ íƒ ğŸ‘‰ update

```javascript
selection = d3.selectAll('rect')
  .data([1,2,3,4,5,6]);

// enter
selection.enter().append('rect')
  .x((d, i) => i)
  .attr('height', d => d);

// update
selection.x((d, i) => i)
  .attr('height', d => d)

// exit
selection.exit().remove()
```
]

---
.left-column[
  ## # D3?
  ## # í¸ê²¬
  ## # Selection
]

.right-column[
ì „ë‹¬ëœ ë°ì´í„°ë§Œ ê°™ë‹¤ë©´, `Selection` ì„ ì—¬ëŸ¬ë²ˆ ìˆ˜í–‰í•´ë„ ê²°ê³¼ëŠ” í•­ìƒ ê°™ìŠµë‹ˆë‹¤. ì¦‰ í•­ìƒ ê°™ì€ `DOM` ì„ ë³´ì—¬ì¤ë‹ˆë‹¤.

```javascript
d3(data_1) = dom_1
d3(data_2) = dom_2
// later ...
d3(data_1) = dom_1
```
]

---
.left-column[
  ## # React?
]

.right-column[
facebookì—ì„œ ê³µê°œí•œ UI ì „ìš© ë¼ì´ë¸ŒëŸ¬ë¦¬.
UI ë¥¼ ì‘ì€ ì»´í¬ë„ŒíŠ¸ë¡œ ë‚˜ëˆ„ì–´ ê°œë°œí•˜ê³ , ì´ë¥¼ ì¡°í•©í•´ì„œ ì „ì²´ UI ë¥¼ êµ¬ì„±

```javascript
// Title.jsx
React.createClass({
  render() {
    return <h1>{this.props.foo}</h1>;
  }
});

// Root.jsx
import Title from './Title.jsx';
import List from './List.jsx';

React.createClass({
  render() {
    return (
    <div>
      <Title foo="hello" />
      <List bar={this.state.list} />
    </div>
    );
  }
});
```
]

---
.left-column[
  ## # React?
  ## # ì‹œì‘í•˜ê¸°
]

.right-column[
`props`, `state`, `render` ì´í•´í•˜ê¸°

* `props` : ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ë¡œ ë¶€í„° ì „ë‹¬ëœ ê°’ (ë³€ê²½ë¶ˆê°€)
* `state` : ì»´í¬ë„ŒíŠ¸ê°€ ê°€ì§€ëŠ” ìƒíƒœ
* `render` : `props` ì™€ `state` ë¥¼ ì¡°í•©í•´ ì»´í¬ë„ŒíŠ¸ê°€ í‘œì‹œí•  ë·°ë¥¼ ë§Œë“¤ì–´ë‚´ëŠ” ë¶€ë¶„

```javascript
function componentName(props) {
  var state = {};
  // mix up with props & state
  return <div attr={this.state.foo}>{this.props.bar}</div>;
}
```
]

---
.left-column[
  ## # React?
  ## # ì‹œì‘í•˜ê¸°
  ## # ê³µí†µì 
]

.right-column[
ì „ë‹¬ëœ `props` ê°€ ê°™ê³ , `state` ê°€ ë™ì¼í•˜ë©´ `render` ì˜ ë¦¬í„´ê°’ì€ í•­ìƒ ë™ì¼.
ì¦‰, ì»´í¬ë„ŒíŠ¸ê°€ ê°™ì€ í™”ë©´ì„ ê·¸ë¦°ë‹¤.

```javascript
ReactComponent(props_1) = dom_1
ReactComponent(props_2) = dom_2
// later ...
ReactComponent(props_1) = dom_1
```

ì–´? ê·¸ëŸ¼ `D3` ë‘ í•©ì„±í•˜ëŠ”ê²Œ ê°€ëŠ¥í•˜ì§€ ì•Šì„ê¹Œìš”?

```javascript
d3(ReactComponent(props_1)) = dom_1
d3(ReactComponent(props_2)) = dom_2
```
]

---
.left-column[
  ## # React?
  ## # ì‹œì‘í•˜ê¸°
  ## # ê³µí†µì 
]

.right-column[
`React` ì™€ `D3` ëŠ” ë™ì¼í•œ ì¸ìê°€ ì£¼ì–´ì§€ë©´ ë™ì¼í•œ DOM ì„ ë³´ì—¬ì£¼ëŠ” í•¨ìˆ˜ë¼ëŠ” ì ì—ì„œ ìƒë‹¹íˆ ìœ ì‚¬í•œ ë¶€ë¶„ì´ ìˆìœ¼ë©°, ì´ë¥¼ ì´ìš©í•´ ë‘ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ í•¨ê»˜ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.

```javascript
d3(data) = dom
ReactComponent(props) = dom

d3(ReactComponent(props)) = dom
```
]

---
class: center, middle

# ì„ì–´ ë´…ì‹œë‹¤.

---
.left-column[
  ## # mix
]

.right-column[
`React` ì™€ `D3` ë¥¼ ì¡°í•©í•˜ëŠ” ë°©ë²•ì€ í¬ê°€ 2ê°€ì§€ê°€ ìˆìŠµë‹ˆë‹¤.

* `D3` ì˜ enter, update, exit íŒ¨í„´ì„ í™œìš©í•˜ê³ , `React` ëŠ” ì»´í¬ë„ŒíŠ¸ì˜ ë¼ì´í”„ ì‚¬ì´í´ë§Œ ë‹´ë‹¹ (`d3(react())`)
* `D3` ì˜ ë°ì´í„° ë³€í™˜, scale ë“±ì˜ ìœ í‹¸ë¦¬í‹°ë§Œ í™œìš©í•˜ê³ , `React` ê°€ ë Œë”ë§ì„ ë‹´ë‹¹ (`d3 << react`)
]

---
.left-column[
  ## # mix
  ## # d3(react())
]

.right-column[
ë³„ë‹¤ë¥¸ ê³ ë¯¼ì—†ì´ `componentDidMount` ì— ëª¨ë“  `D3` ì½”ë“œë¥¼ ë‹¤ ë•Œë ¤ ë„£ì–´ë„ ë©ë‹ˆë‹¤ ğŸ‘»

```javascript
  componentDidMount() {
*   let el = this.findDOMNode(this);
    this.W = this.props.width;
    this.H = this.props.height;
*   this.svg = d3.select(el).append('svg')
      .attr('width',  this.W)
      .attr('height', this.H);
    this.plot= this.svg.append('g');
    this.renderTriangles randomize(5, 40);
    this.intervalID = setInterval(() => {
      this.renderTriangles(randomize(5, 40));
    }, 2000);
  }

  renderTriangles(data) {
    // update, enter, exit
  }

  render() {
    return <div className='triangles' style={style} />;
  }
```
]

---
.left-column[
  ## # mix
  ## # d3(react())
]

.right-column[
ë³„ë‹¤ë¥¸ ê³ ë¯¼ì—†ì´ `componentDidMount` ì— ëª¨ë“  `D3` ì½”ë“œë¥¼ ë‹¤ ë•Œë ¤ ë„£ì–´ë„ ë©ë‹ˆë‹¤ ğŸ‘»

<div id="triangles-demo" style="margin-top: 3em;"></div>
]

---
.left-column[
  ## # mix
  ## # d3(react())
]

.right-column[
í•˜ì§€ë§Œ `props` ì—…ë°ì´íŠ¸ë‚˜ `state` ë³€ê²½ì— ëŒ€ì‘í•˜ê¸° ìœ„í•´ì„œëŠ” `componentDidUpdate` ì— ì½”ë“œë¥¼ ë‚˜ëˆ„ì–´ ì‘ì„±í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.

* `componentDidMount` : DOM element ì™€ scale, layout ì¸ìŠ¤í„´ìŠ¤ ìƒì„±
* `componentDidUpdate` : size ì¡°ì ˆ, scale ì¬ì„¤ì • & enter, update, exit
* `shouldComponentUpdate` : `componentDidUpdate` í˜¸ì¶œì—¬ë¶€ ê²°ì •
]

---
.left-column[
  ## # mix
  ## # d3(react())
]

.right-column[
í•˜ì§€ë§Œ `props` ì—…ë°ì´íŠ¸ë‚˜ `state` ë³€ê²½ì— ëŒ€ì‘í•˜ê¸° ìœ„í•´ì„œëŠ” `componentDidUpdate` ì— ì½”ë“œë¥¼ ë‚˜ëˆ„ì–´ ì‘ì„±í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.

```javascript
componentDidMount() {
  let el = React.findDOMNode(this);
  let oW = this.props.width;
  let oH = this.props.height;
  let W  = oW - M - M;
  let H  = oH - M - M;
  let svg = d3.select(el).append('svg')
    .attr('width', oW)
    .attr('height', oH);

  this.plot = svg.append('g')
    .attr('transform', 'translate(' + M + ', ' + M + ')');
},

componentDidUpdate() {
  let data = this.props.data;
  let g = this.plot.selectAll('g');
  g.enter()
    .append('g')
    .append('path')
    .attr('fill', 'none')
    .attr('stroke', (d, i) => COLORS[i])
    .attr('d', (d) => this.line(d));
  g.select('path')
    .transition()
    .delay((d, i) -> i * ANIM_DELAY)
    .attr('d', (d) => this.line(d))
    .duration(ANIM_DURATION);
  g.exit().remove();
},

render() {
  return <div></div>;
}
```
]

---
.left-column[
  ## # mix
  ## # d3(react())
]

.right-column[
í•˜ì§€ë§Œ `props` ì—…ë°ì´íŠ¸ë‚˜ `state` ë³€ê²½ì— ëŒ€ì‘í•˜ê¸° ìœ„í•´ì„œëŠ” `componentDidUpdate` ì— ì½”ë“œë¥¼ ë‚˜ëˆ„ì–´ ì‘ì„±í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.

<div id="multiline-demo" style="margin-top: 3em;"></div>
]

---
.left-column[
  ## # mix
  ## # d3(react())
]

.right-column[
ìŠ¤í¬ë¦° ì‚¬ì´ì¦ˆì— ë”°ë¼ í¬ê¸°ê°€ ë³€í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ë¥¼ ë§Œë“¤ê³  ì‹¶ë‹¤ë©´, `componentDidMount` ì½”ë“œì˜ ë§ˆì§€ë§‰ì— `forceUpdate()` ë¥¼ í˜¸ì¶œí•˜ëŠ” ê²ƒë„ ê³ ë ¤í•´ ë³¼ë§Œí•©ë‹ˆë‹¤.

> componentDidMount ê°€ í˜¸ì¶œë˜ëŠ” ì‹œì ì— ì»´í¬ë„ŒíŠ¸ì˜ ì‚¬ì´ì¦ˆê°€ 0 ì¼ ìˆ˜ë„ ìˆìŒ

```javascript
componentDidMount() {
  let el = React.findDOMNode(this);
  let oW = this.props.width;
  let oH = this.props.height;
  let W  = oW - M - M;
  let H  = oH - M - M;
  let svg = d3.select(el).append('svg')
    .attr('width', oW)
    .attr('height', oH);

  this.plot = svg.append('g')
    .attr('transform', 'translate(' + M + ', ' + M + ')');

* this.forceUpdate();
}
```
]

---
.left-column[
  ## # mix
  ## # d3(react())
]

.right-column[
ì»´í¬ë„ŒíŠ¸ì˜ ëª¨ë“  ìš”ì†Œë¥¼ `D3` ë¡œ ë Œë”ë§ í•˜ëŠ” ê²ƒì„ ì¶”ì²œ (íŠ¹íˆ legend)

`React` ë§Œìœ¼ë¡œ legend ë¥¼ ê·¸ë¦¬ê¸° ìœ„í•´ì„œëŠ” `state` ë¥¼ í†µí•´ ë°ì´í„°ë¥¼ `render` í•¨ìˆ˜ë¡œ ì „ë‹¬í•´ì•¼ í•˜ëŠ”ë°, `componentDidUpdate` ì—ì„œëŠ” ë¶ˆê°€ëŠ¥í•˜ê³ ,
```javascript
componentDidUpdate() {

  // enter(), udpate(), exit() ...

  let groupByType = d3.nest()
  .key(d => d.type)
  .rollup(values => values.length)
  .entries(this.props.users);

  // may cause Maximum call stack size exceeded exception !!
  this.setState({legend: groupByType});
},
```

> ê·¸ë˜ë„ ì´ë ‡ê²Œ êµ¬í˜„í•˜ê³  ì‹¶ë‹¤ë©´, ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ì—ì„œ groupByTypeìœ¼ë¡œ ì •ë¦¬í•´ì„œ ë„˜ê²¨ì¤˜ë„ ë©ë‹ˆë‹¤.
]

---
.left-column[
  ## # mix
  ## # d3(react())
]

.right-column[
`render` í•¨ìˆ˜ì—ì„œ ë°ì´í„°ë¥¼ ì •ë¦¬í•˜ë©´, `render` í•¨ìˆ˜ì—ì„œ ë¶ˆí•„ìš”í•œ í•¨ìˆ˜ í˜¸ì¶œì´ ì¦ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```javascript
render () {
  // this will call every render()
  let groupByType= d3.nest()
  .key(d => d.type)
  .rollup(values => values.length)
  .entries(this.props.users);

  return (
    <div>
      <ul>
      { this.props.groupByType.map(value => <Legend data={value}/>) }
      </ul>
    </div>
  );
},
```
]

---
.left-column[
  ## # mix
  ## # d3(react())
]

.right-column[
ì»´í¬ë„ŒíŠ¸ì˜ ëª¨ë“  ìš”ì†Œë¥¼ `D3` ë¡œ ë Œë”ë§ í•˜ë©´, `render` ì—ì„œ ë§¤ë²ˆ ë°ì´í„°ë¥¼ ì •ë¦¬í•˜ê±°ë‚˜, ë”°ë¡œ `props` ë¡œ ë„˜ê²¨ì£¼ì§€ ì•Šê³ , `componentDidUpdate` ì—ì„œ í•œë²ˆì— ì²˜ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ğŸ™‹

```javascript
componentDidUpdate() {
  this.updateLegend();
},

updateLegend() {
  let groupByType= d3.nest()
  .key(d => d.type)
  .rollup(values => values.length)
  .entries(this.props.users);

  let ul = d3.select(this.el).select('ul');

  let div = ul.selectAll('div')
    .data(groupByType);

  let enter = div.enter()
    .append('div');

  enter.append('li');
    .append('span');
    .attr('class', 'box')
    .style('background', (d, i) => COLOR[i]);

  enter.append('li').text((d) => d.key);

  div.select('.box')
    .style('background', (d, i) => COLOR[i]);

  div.exit().remove()
}
```
]

---
.left-column[
  ## # mix
  ## # d3(react())
]

.right-column[
ì»´í¬ë„ŒíŠ¸ì˜ ëª¨ë“  ìš”ì†Œë¥¼ `D3` ë¡œ ë Œë”ë§ í•˜ë©´, `render` ì—ì„œ ë§¤ë²ˆ ë°ì´í„°ë¥¼ ì •ë¦¬í•˜ê±°ë‚˜, ë”°ë¡œ `props` ë¡œ ë„˜ê²¨ì£¼ì§€ ì•Šê³ , `componentDidUpdate` ì—ì„œ í•œë²ˆì— ì²˜ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ğŸ™‹

<div id="pie-demo" style="margin-top: 3em;"></div>
]

---
.left-column[
  ## # mix
  ## # d3(react())
  ## # d3 << react
]

.right-column[
`React`ëŠ” `html` ì—˜ë¦¬ë¨¼íŠ¸ ë¿ë§Œ ì•„ë‹ˆë¼ `svg` ì•¨ë¦¬ë¨¼íŠ¸ë„ ì§€ì›í•˜ê¸°ë•Œë¬¸ì—,  ë Œë”ë§ì„ ëª¨ë‘ `React`ì— ë§¡ê¸°ëŠ” ê²ƒë„ ê°€ëŠ¥í•©ë‹ˆë‹¤.

https://facebook.github.io/react/docs/tags-and-attributes.html#svg-elements

```javascript
render() {
  let x = d3.scale.linear()
    .domain(d3.extent(this.state.data))
    .range([xMin, xMax]);
  let y = d3.scale.linear()
    .domain(d3.extent(this.state.data))
    .range([yMin, yMax]);

  // create line
  let line = d3.svg.line()
    .interpolate('monotone')
    .x((d, i) => x(i))
    .y((d) => y(d))

  return (
  <div>
*   <svg ref='svg' width={width} height={height}>
*     <path d={line(this.state.data)} />
    </svg>
  </div>
  );
}
```

]

---
.left-column[
  ## # mix
  ## # d3(react())
  ## # d3 << react
]

.right-column[
`React`ëŠ” `html` ì—˜ë¦¬ë¨¼íŠ¸ ë¿ë§Œ ì•„ë‹ˆë¼ `svg` ì•¨ë¦¬ë¨¼íŠ¸ë„ ì§€ì›í•˜ê¸°ë•Œë¬¸ì—,  ë Œë”ë§ì„ ëª¨ë‘ `React`ì— ë§¡ê¸°ëŠ” ê²ƒë„ ê°€ëŠ¥í•©ë‹ˆë‹¤.

https://facebook.github.io/react/docs/tags-and-attributes.html#svg-elements

<div id="line-demo-1"></div>
]

---
.left-column[
  ## # mix
  ## # d3(react())
  ## # d3 << react
]

.right-column[
ì‹¬ì§€ì–´ `D3` ë¡œ ê·¸ë¦´ ì°¨íŠ¸ì˜ êµ¬ì„±ìš”ì†Œë¥¼ ì»´í¬ë„ŒíŠ¸ë¡œ ë‚˜ëˆ„ì–´ ì¡°í•©í•˜ëŠ” ê²ƒë„ ê°€ëŠ¥í•©ë‹ˆë‹¤.
> from [github](https://github.com/znation/scalable-data-visualization), [youtube](https://www.youtube.com/watch?v=2ii1lEkIv1s&index=15&list=PLb0IAmt7-GS1cbw4qonlQztYV1TAW0sCr)

`D3` ë§Œìœ¼ë¡œ êµ¬í˜„í•˜ëŠ” ê²ƒë³´ë‹¤ ì„±ëŠ¥ìƒì˜ ì´ì ì´ ìˆì„ê¹Œ?

```javascript
render() {
  let data = this.props.data;
  let values = toArray(data.getValues());
  return(
  <g>
    {values.map((value, idx) => {
      scaleWidth = (this.props.width/(data.getDay())) + 0.5;
      <rect
        fill='#48cc81'
        key={idx}
        x={0}
        y={0}
        width={1}
        height={1}
        style={{
          transition: '0.5s',
        }}
      />
      })
    }
  </g>
  );
}
```
]

---
.left-column[
  ## # mix
  ## # d3(react())
  ## # d3 << react
]

.right-column[
ì‹¬ì§€ì–´ `D3` ë¡œ ê·¸ë¦´ ì°¨íŠ¸ì˜ êµ¬ì„±ìš”ì†Œë¥¼ ì»´í¬ë„ŒíŠ¸ë¡œ ë‚˜ëˆ„ì–´ ì¡°í•©í•˜ëŠ” ê²ƒë„ ê°€ëŠ¥í•©ë‹ˆë‹¤.

> from [github](https://github.com/znation/scalable-data-visualization), [youtube](https://www.youtube.com/watch?v=2ii1lEkIv1s&index=15&list=PLb0IAmt7-GS1cbw4qonlQztYV1TAW0sCr)

`D3` ë§Œìœ¼ë¡œ êµ¬í˜„í•˜ëŠ” ê²ƒë³´ë‹¤ ì„±ëŠ¥ìƒì˜ ì´ì ì´ ìˆì„ê¹Œ?

<div id="histogram-demo"></div>
]

---
.left-column[
  ## # mix
  ## # d3(react())
  ## # d3 << react
]

.right-column[
ì´ë²¤íŠ¸ ì²˜ë¦¬ê²°ê³¼ë¥¼ DOMì— ë°˜ì˜í•˜ê¸° ìœ„í•´ì„œ ë§¤ë²ˆ `setState` ë¥¼ í˜¸ì¶œí•´ì•¼ í•©ë‹ˆë‹¤.

```javascript
componentDidMount() {
  d3.select(React.findDOMNode(this.refs.svg))
    .on('mousemove', () => {
      this.handleMouseMove(d3.mouse(this));
    }
},

handleMouseMove(point) {
  let x = this.x.invert(point[0] / this.getScaleFactor());
  let i = d3.bisect(X_RANGE, this.x);
  let d0 = X_RANGE[i - 1];
  let d1 = X_RANGE[i];
  let p = i - d0 > d1 ? d1 : d0;
* this.setState({point: p});
}

render() {
  this.x = d3.scale.linear()
    .domain([0, 30])
    .range([xMin, xMax]);
  this.y = d3.scale.linear()
    .domain(d3.extent(this.state.data))
    .range([yMin, yMax]);

  let circle;
  if (this.state.point && highlight) {
    let p = this.state.point;
    circle = <circle cx={this.x(p)}
                     cy={this.y(this.state.data[p])}
                     r={6}
                     style={circleStyle}/>
  }
  return
  <div className='center'>
    <svg ref='svg' width={width} height={height}>
      <path d={line(this.state.data)} style={pathStyle} />
      {circle}
    </svg>
  </div>
}
```
]

---
.left-column[
  ## # mix
  ## # d3(react())
  ## # d3 << react
]

.right-column[
ì´ë²¤íŠ¸ ì²˜ë¦¬ê²°ê³¼ë¥¼ DOMì— ë°˜ì˜í•˜ê¸° ìœ„í•´ì„œ ë§¤ë²ˆ `setState` ë¥¼ í˜¸ì¶œí•´ì•¼ í•©ë‹ˆë‹¤.

<div id="line-demo-2"></div>

> ì°¨íŠ¸ì— ë§ˆìš°ìŠ¤ë¥¼ ì˜¬ë¦¬ë©´ ğŸ˜
]

---
.left-column[
  ## # mix
  ## # d3(react())
  ## # d3 << react
  ## # ì •ë¦¬
]

.right-column[
d3(react())

* ìš°ì•„í•œ `D3` ì˜ enter, update, exit ë¥¼ ê·¸ëŒ€ë¡œ ì‚¬ìš©
* `D3` ì˜ ì• ë‹ˆë©”ì´ì…˜ í™œìš© ê°€ëŠ¥
* ë°ì´í„°ê°€ ì–´ë””ì— ë§¤í•‘ë˜ì—ˆëŠ”ì§€ í™•ì¸ ê°€ëŠ¥
* ìì¹« ì˜ëª»í•˜ë©´ ì»´í¬ë„ŒíŠ¸ì˜ ì½”ë“œê°€ ê¸¸ì–´ì§ˆ ìˆ˜ë„ ìˆìŒ
* `react-native` ë“± ë‹¤ë¥¸ í”Œë«í¼ì„ ì§€ì›í•˜ëŠ” ì‹œë¦¬ì¦ˆì—ì„œëŠ” ì‚¬ìš© ë¶ˆê°€ëŠ¥ ...

d3 << react

* í•˜ë‚˜ì˜ ì°¨íŠ¸ë¥¼ ì—¬ëŸ¬ ì»´í¬ë„ŒíŠ¸ë¡œ ë‚˜ëˆ  ì¬ì‚¬ìš©ì„±ì„ ê·¹ëŒ€í™”
* `react-canvas` ë¥¼ íƒ€ê²Ÿìœ¼ë¡œ ë Œë”ë§í•´ ì„±ëŠ¥ í–¥ìƒì„ ê¾€í•  ìˆ˜ë„ ìˆë‹¤. (ì‹¤í—˜í•´ ë³´ê³  ì‹¶ë‹¤ëŠ”)
* `render` í•¨ìˆ˜ê°€ êµ‰ì¥íˆ ë³µì¡í•´ ì§ˆ ìˆ˜ ìˆìŒ
]

---
class: center, middle

# ë¤¼ã„·ì€ ì–´ë–»ê²Œ ì‚¬ìš©í•˜ë‚˜ìš”?

.degrade[í•œë‚˜ì²´ ã…‚ã„·ã…‚ã„·]

---
.left-column[
  ## # d3(react())
]

.right-column[
ë¥ƒì€ `d3(react())` ë°©ì‹ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.

* ì €ëŠ” `D3` ë¹  ì´ê¸° ë•Œë¬¸ì— ğŸ‘…
* [codepen](https://codepen.io/chitacan) ì—ì„œ ì‘ì—…í•œ `D3` ì½”ë“œë¥¼ ë°”ë¡œ ì‚¬ìš©í•˜ê¸° ìœ„í•´
* `props` ë¡œëŠ” ìµœì†Œí•œì˜ ë°ì´í„°ë§Œ ì „ë‹¬í•˜ê³  ì»´í¬ë„ŒíŠ¸ ì•ˆì—ì„œ í•„ìš”í•œ ë°ì´í„°ë¥¼ ë³€í™˜í•˜ëŠ” ë°©ì‹ì„ ì„ í˜¸í•©ë‹ˆë‹¤.
]

---
.left-column[
  ## # d3(react())
  ## # ì‚¬ìš©í•œ ê³³?
]

.right-column[
sledge

* renote 2.0 ì•ŒíŒŒí…ŒìŠ¤íŠ¸
* ì›¹ì—ì„œ ë¬¸ì œë¥¼ í’€ê³ , ì¶”ì²œ ë°›ì„ ìˆ˜ ìˆëŠ” UI + ì „ì²´ ìœ ì €ì˜ ì„±ì ì„ í•œëˆˆì— í™•ì¸í•  ìˆ˜ ìˆëŠ” ëŒ€ì‹œë³´ë“œ
* mobile / desktop ì„ ë™ì‹œì— ì§€ì›í•˜ê¸° ìœ„í•´ responsive í•œ `D3` ë§› `React` ì»´í¬ë„ŒíŠ¸ ì‘ì„±
* `D3`, `React`, `reflux`, `react-bootstrap`, `babel`, `browserify`, `q`, `lodash`, `amazon s3`

![:scale 37%](img/screenshot_sledge_1.png)
![:scale 37%](img/screenshot_sledge_2.png)
]

---
.left-column[
  ## # d3(react())
  ## # ì‚¬ìš©í•œ ê³³?
]

.right-column[
sledge

* renote 2.0 ì•ŒíŒŒí…ŒìŠ¤íŠ¸
* ì›¹ì—ì„œ ë¬¸ì œë¥¼ í’€ê³ , ì¶”ì²œ ë°›ì„ ìˆ˜ ìˆëŠ” UI + ì „ì²´ ìœ ì €ì˜ ì„±ì ì„ í•œëˆˆì— í™•ì¸í•  ìˆ˜ ìˆëŠ” ëŒ€ì‹œë³´ë“œ
* mobile / desktop ì„ ë™ì‹œì— ì§€ì›í•˜ê¸° ìœ„í•´ responsive í•œ `D3` ë§› `React` ì»´í¬ë„ŒíŠ¸ ì‘ì„±
* `D3`, `React`, `reflux`, `react-bootstrap`, `babel`, `browserify`, `q`, `lodash`, `amazon s3`

![:scale 90%](img/screenshot_sledge_3.png)
]

---
.left-column[
  ## # d3(react())
  ## # ì‚¬ìš©í•œ ê³³?
]

.right-column[
lapland

* SANTA! ì˜ back office
* ë¬¸ì œ ë¶„ì„ê³¼ ê²€ìƒ‰, ìœ ì € ì„±ì  ë¶„ì„ / ê´€ë¦¬
* rxjs ë¥¼ í™œìš©í•´ ë¹„ë™ê¸° ì‘ì—… ì²˜ë¦¬
* `D3`, `React`, `redux`, `react-bootstrap`, `coffeescript`, `browserify`, `rxjs`, `lodash`, `amazon s3`

![:scale 35%](img/screenshot_lapland_1.png)
![:scale 35%](img/screenshot_lapland_2.png)
]

---
.left-column[
  ## # d3(react())
  ## # ì‚¬ìš©í•œ ê³³?
]

.right-column[
lapland

* SANTA! ì˜ back office
* ë¬¸ì œ ë¶„ì„ê³¼ ê²€ìƒ‰, ìœ ì € ì„±ì  ë¶„ì„ / ê´€ë¦¬
* rxjs ë¥¼ í™œìš©í•´ ë¹„ë™ê¸° ì‘ì—… ì²˜ë¦¬
* `D3`, `React`, `redux`, `react-bootstrap`, `coffeescript`, `browserify`, `rxjs`, `lodash`, `amazon s3`

![:scale 90%](img/screenshot_lapland_3.png)
]

---
.left-column[
  ## # d3(react())
  ## # ì‚¬ìš©í•œ ê³³?
  ## # ì•„!
]

.right-column[
ì‚¬ì‹¤ ì´ ìŠ¬ë¼ì´ë“œì˜ ë°ëª¨ë„ ëª¨ë‘ `D3`ë¡œ ê·¸ë ¤ì§€ëŠ” `React` ì»´í¬ë„ŒíŠ¸ ğŸ™‹

`slide.md`

```html
<div id="triangles"></div>
```

`app.coffee`

```coffeescript
Triangles = require './components/triangles.coffee'

slides.on 'beforeShowSlide', (slide)->
  switch slide.getSlideIndex()
    when 21
*     React.render <Triangles width={400} height={200}/>,
*     getEl 'triangles-demo'

slides.on 'hideSlide', (slide)->
  switch slide.getSlideIndex()
*   when 21 then React.unmountComponentAtNode getEl 'triangles-demo'
```
]

---
class: center, middle

# ë

